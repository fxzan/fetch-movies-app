(this["webpackJsonpfetch-movie-app"]=this["webpackJsonpfetch-movie-app"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports={movie:"Movie_movie__1q4sM"}},function(e,t,n){e.exports={"movies-list":"MoviesList_movies-list__21l9n"}},function(e,t,n){e.exports=n(21)},,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(5),l=n.n(o),c=(n(17),n(2)),i=n.n(c),s=n(3),u=n(1),m=n(6),p=n.n(m),f=function(e){return r.a.createElement("li",{className:p.a.movie},r.a.createElement("h2",null,e.title),r.a.createElement("h3",null,e.releaseDate),r.a.createElement("p",null,e.openingText),r.a.createElement("button",{onClick:function(){e.onDelete(e.id)}},"Delete"))},v=n(7),h=n.n(v),d=function(e){function t(t){e.onDelete(t)}return r.a.createElement("ul",{className:h.a["movies-list"]},e.movies.map((function(e){return r.a.createElement(f,{key:e.id,id:e.id,title:e.title,releaseDate:e.releaseDate,openingText:e.openingText,onDelete:t})})))};n(19),n(20);var E=function(e){var t=r.a.useState(""),n=Object(u.a)(t,2),a=n[0],o=n[1],l=r.a.useState(""),c=Object(u.a)(l,2),i=c[0],s=c[1],m=r.a.useState(""),p=Object(u.a)(m,2),f=p[0],v=p[1],h=r.a.useState(!0),d=Object(u.a)(h,2),E=d[0],b=d[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),0!==a.trim().length&&0!==i.trim().length&&0!==f.trim().length?(e.onAddMovie({title:a,openingText:f,releaseDate:i}),o(""),s(""),v(""),b(!0)):b(!1)}},r.a.createElement("label",{htmlFor:"form-title"},"Title"),r.a.createElement("input",{id:"form-title",type:"text",value:a,onChange:function(e){o(e.target.value)}}),r.a.createElement("label",{htmlFor:"form-title"},"Release Date"),r.a.createElement("input",{id:"form-date",type:"date",value:i,onChange:function(e){s(e.target.value)}}),r.a.createElement("label",{htmlFor:"form-text"},"Opening Text"),r.a.createElement("textarea",{id:"form-text",type:"text",value:f,onChange:function(e){v(e.target.value)}}),!E&&r.a.createElement("h3",null,"Please fill in all the fields."),r.a.createElement("button",{type:"submit"},"Add Movie"))};var b=function(){var e=r.a.useState([]),t=Object(u.a)(e,2),n=t[0],a=t[1],o=r.a.useState(!1),l=Object(u.a)(o,2),c=l[0],m=l[1],p=r.a.useState(null),f=Object(u.a)(p,2),v=f[0],h=f[1],b=r.a.useState(!1),g=Object(u.a)(b,2),x=g[0],j=g[1],k=r.a.useState(!0),y=Object(u.a)(k,2),O=y[0],D=y[1],S=r.a.useCallback(Object(s.a)(i.a.mark((function e(){var t,n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching Movies"),m(!0),h(null),e.prev=3,e.next=6,fetch("https://react-movie-ee774-default-rtdb.asia-southeast1.firebasedatabase.app/movies.json");case 6:if((t=e.sent).ok){e.next=10;break}throw j(!0),new Error("Something Went Wrong! (Error: "+t.status+")");case 10:return e.next=12,t.json();case 12:for(o in n=e.sent,r=[],n)r.push({id:o,title:n[o].title,openingText:n[o].openingText,releaseDate:n[o].releaseDate});a(r),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),h(e.t0.message);case 21:m(!1);case 22:case"end":return e.stop()}}),e,null,[[3,18]])}))),[]);function T(){return(T=Object(s.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://react-movie-ee774-default-rtdb.asia-southeast1.firebasedatabase.app/movies.json",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Something Went Wrong! (Error: "+n.status+")");case 6:return e.next=8,n.json();case 8:a=e.sent,console.log(a),S(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function w(){return(w=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-movie-ee774-default-rtdb.asia-southeast1.firebasedatabase.app/movies/".concat(t,".json"),{method:"DELETE",headers:{"Content-Type":"application/json"}});case 2:n=e.sent,console.log(n),S();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.a.useEffect((function(){if(O&&(D(!1),S()),x)var e=setTimeout((function(){console.log("Retry"),S()}),5e3);return function(){return clearTimeout(e)}}),[O,x,v,S]);var C=r.a.createElement("p",null,"Found no movies.");return c&&(C=r.a.createElement("p",null,"Loading...")),v&&(C=r.a.createElement("p",null,v)),v&&x&&(C=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,v),r.a.createElement("div",null,"Retrying..."),r.a.createElement("button",{onClick:function(){j(!1)}},"Cancel"))),!c&&n.length>0&&(C=r.a.createElement(d,{movies:n,onDelete:function(e){return w.apply(this,arguments)}})),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",null,r.a.createElement(E,{onAddMovie:function(e){return T.apply(this,arguments)}})),r.a.createElement("section",null,r.a.createElement("button",{onClick:S},"Fetch Movies")),r.a.createElement("section",null,C))};l.a.createRoot(document.getElementById("root")).render(r.a.createElement(b,null))}],[[8,1,2]]]);
//# sourceMappingURL=main.29ad7591.chunk.js.map